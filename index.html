<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<title>System Monitor</title>
	<link rel="stylesheet" href="resource/bootstrap/css/bootstrap.min.css">
	<script src="resource/js/jquery-2.1.1.min.js"></script>
	<script src="resource/bootstrap/js/bootstrap.js"></script>
</head>
<body>
<div class="panel panel-default">
  <div class="panel-heading">绑定设备</div>
  <div class="panel-body">
    <form role="form">
	  <div class="form-group">
		<label for="product_sn">Product SN</label>
		<input type="text" class="form-control" id="product_sn" placeholder="SN">
	  </div>
	  <div class="form-group">
		<label for="product_key">Product Key</label>
		<input type="text" class="form-control" id="product_key" placeholder="Key">
	  </div>
	  <button id="btn_bind" type="button" class="btn btn-default">确定</button>
	</form>
  </div>
</div>

<script>
var fs = require("fs");

fs.readFile("config.txt", function(err, data){
	if(err) throw err;
	var data = JSON.parse(data);
	
	$("#product_sn").val(data.sn);
	$("#product_key").val(data.key);
});


$("#btn_bind").click(function(){
	var sn = $("#product_sn").val();
	var key = $("#product_key").val();
	
	var obj = {
		sn: sn,
		key: key
	};
	
	fs.writeFile('config.txt', JSON.stringify(obj), function (err) {
	  if (err) throw err;
	  
	  console.log("A");
	});
});
</script>
</body>
</html>